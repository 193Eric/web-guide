# 关于项目控制，代码质量的一些看法

> 前端团队现在面临的问题：代码质量参差不齐，低端bug多；项目把控能力不强，估期水分多；项目延期频繁， 执行力有待提高。
综上所述，前端团队的战斗力还有很大提升空间。
以下是一些具体的情形，做的越好的程序员，能力也就越强。
这和用什么框架，语言，编辑器没有关系，就是你面对一个项目时你控制它的能力。

## bug 的类型

### 功能缺失

> 一般情况就是在评审和排期阶段工作没做足。
> 首先，评审时对于产品提出的特性、功能没有代入实际场景中去考察它的合理性。没有足够理解产品经理的意图和目标。
> 其次，缺失代码设计，系统完整性的考虑。单纯的堆砌功能，没有进行需求拆分，模块划分，设计时没有遵循”单一职责模式“。
> 最后，后台给到接口时没有思考过他的合理性。

__关于后台接口可以注意的有哪些__

1. 需要的字段都有吗
2. 字段如果为空时符合预期吗?有字段为对应数据类型的空，还是没有对应的key值
3. json数据的层次是否合理，是否需要前端二次加工
4. url 设计是否合理，符合restful风格吗
5. 不要信任后台的接口，做好防御 （防御式编程 -- 代码大全这本书中有提及）

### 没有处理边界条件, 类型检查

> 首先要有这种意识，其次要在开发时把这根弦提起来。
1. 如果为空，未定义时如何处理

### 平台兼容性

> 首先是项目经验的积累，在代码设计和实施层面就处理。
其次，没有足够的自测，自己做的东西自己没有系统的体验过。

* 浏览器类型
* 浏览器运行设备

### 语言了解不够透彻引入的bug

> 《JavaScript 精粹》 里有关于js这门语言设计的好的部分和不好的部分。

* js 全局变量污染
* js 循环语句中定义函数
* js 动态语言，数据类型无法控制
* js 事件驱动，异步编程中，对于时序的控制没有概念
* js 作用域，作用域链的概念理解不够透彻

## bug 引入的可能情况

### 复制代码

> 维护成本高昂，一处错误多处修改，使得测试和调试的时间和成本都增加了。
> 如果一个程序员还停留在这个阶段，说明是需要提升的。如果一直迈不过去，那等待的就是被淘汰了。

### 没有测量或管理 - 代码复杂度

> “复杂度杀手。 复杂度不断吞噬着开发者的生命，它使得项目很难做计划，很难构建和测试，同时它也引入了安全威胁，并且让用户和管理者感到沮丧。“ -- Ray Ozzie
> 代码复杂度的一个衡量方式是循环复杂度。它是指代码可以通过的逻辑分支的数量。实际中，它经常近似于`if`,`while`,`for`,`foreach`等类似表达式的数量。
> 想想一下，一个方法中控制状态越多，它就越复杂，别人也就很难读懂和明白，因此事与愿违的风险就越高。
> 这里很明显的就是，我们现在有些同学的代码评审就是走形式。然后最后要延期，然后为了赶进度，代码就是各种硬编码。然后更可怕的是，缺乏代码重构和优化的意识。
> 其次，为了避免延期，就尽可能的延长排期，水分很大。这也侧面体现了，对于项目没有控制力，管理不好复杂度。从能力模型的角度来看，就是没有养成化繁为简的意识和能力。

### 评审过程不重视

> 项目评审阶段是建立项目整体认识的重要时期。此时可以理解项目的意图，可行性。涉及到的模块，有把握的是那些。
> 复杂度太高的需要详细评估的是那些，那些需要预研，写些demo来确定可行性。如何安排开发顺序，可以比较好的完成开发。

## 总结

> 通过以上的分析，可以知道影响代码质量，项目进度的原因，以及我们可以针对性的采取的措施。

### 原因

1. 语言能力 - 不理解语言的长处和短处
2. 接口对接
3. 项目评审 - 排期流于形式
4. 代码设计缺失 - 复杂度管理
5. 项目经验不足

### 措施

1. 加强语言的理解和学习
2. 积极参与接口的设计，仔细评审接口的合理性
3. 项目评审时不要流于形式，不要认为程序员只是写代码；而是分析问题和解决问题，语言只是我们手头各种工具之一
4. 理解软件工程，或者说项目开发 评审-设计-编码-测试-发布-维护。在每一个环节做足准备，对于排期，设计也是有方法论，下功夫也是有收益的
5. 遵循单一职责原理进行设计， 简单由于复杂，简单难于复杂
6. 参与各种类型的项目，在项目中积极处理各种问题
7. 有精益求精的意识和态度
